!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),s(t,[{key:"render",value:function(){return React.createElement("div",{className:"row",id:"preloader"},React.createElement("div",{className:"progress s4 offset-s4 col"},React.createElement("div",{className:"indeterminate"})))}}]),t}(React.Component);t.a=a},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){var e={};return e.url=window.location.href,e.url_split=e.url.split("/"),e.url=window.location.href,e.split=e.url.split("/"),e.website=e.split[0]+"//"+e.split[2],e.dashboard=e.website+"/dashboard/",e.experiments=e.website+"/apis/experiments/",e.measurement=e.website+"/apis/measurements/",e.experiment=e.website+"/apis/experiment/",e.user_specific=e.website+"/apis/user-specific/",e.user_experiment=e.website+"/apis/user-experiment",e.user_specific_name=e.website+"/apis/user-specific-name/",e.user=e.website+"/apis/user-experiment/",e.registration=e.website+"/apis/registration/",e.groups=e.website+"/apis/groups/",e.textanalyzer=e.website+"/apis/textanalyzer/",e.textdata=e.website+"/apis/textdata/",e.cognitiveloadrevision=e.webseite+"apis/cognitiveloadrevision/",e.csv_text_data=e.website+"/csv_text_export/",e.single_experiment=e.website+"/experiment/",e.run_experiment=e.website+"/run-experiment/",e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.getElementsByTagName("p"),r="",i=0;i<n.length;i++)r+=n[i].textContent+" ",r+="[LINEBREAK]";return r=r.replace(/&#8660/g,""),r=r.replace(/â‡”/g,""),r=r.replace("[LINEBREAK] [LINEBREAK]","[LINEBREAK]")}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),a=n(2),u=n(0),c=n(4),l=n(5),f=n(6),p=n(10),d=n(11),h=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),y=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=n;n.state={user:null,measurement:null,showEditor:!1,showInstruction:!1,showRevisionPrompt:!1,showRevision:!1,showThankYouPage:!1,seenInstruction:!1,seenEditor:!1,seenRevisionPrompt:!1,seenRevision:!1,durationDraft:null,durationRevision:null,draftAnalyzed:null,draftText:"",draftPlainText:"",revisionAnalyzed:null,revisionText:"",revisionPlainText:""},n.urls=s.a;var a=window.location.href;return n.experiment_id=a.substr(a.lastIndexOf("/")+1),fetch(n.urls.user_specific+n.experiment_id,{method:"GET",credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){o.setState({user:e})}),fetch(n.urls.measurement+n.experiment_id,{method:"GET",credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){o.setState({measurement:e[0],showInstruction:!0})}),n.analyzeText=n.analyzeText.bind(n),n.analyzeRevision=n.analyzeRevision.bind(n),n.updateDraft=n.updateDraft.bind(n),n.updateRevision=n.updateRevision.bind(n),n.renderInstruction=n.renderInstruction.bind(n),n.renderEditor=n.renderEditor.bind(n),n.renderRevisionPrompt=n.renderRevisionPrompt.bind(n),n.renderRevision=n.renderRevision.bind(n),n.userClickedInstruction=n.userClickedInstruction.bind(n),n.userClickedRevisionPrompt=n.userClickedRevisionPrompt.bind(n),n.sendDataToServer=n.sendDataToServer.bind(n),n}return o(t,e),h(t,[{key:"render",value:function(){var e=React.createElement(u.a,null);return(null!=this.state.user||this.state.measurement)&&null!=this.state.measurement&&(this.state.showInstruction?e=React.createElement(c.a,{instructionText:this.state.measurement.instruction,renderNextState:this.userClickedInstruction}):this.state.showEditor?e=React.createElement(l.a,{analyzeText:this.analyzeText,updateDraft:this.updateDraft,draftText:this.state.draftText,editorVisible:this.state.showEditor}):this.state.showRevisionPrompt?e=React.createElement(c.a,{instructionText:this.state.measurement.instruction_review,renderNextState:this.userClickedRevisionPrompt,seenInstruction:this.state.seenInstruction,draftAnalyzed:this.state.draftAnalyzed}):this.state.showRevision?e=React.createElement(f.a,{measurement:this.state.user.next_measure,draftText:this.state.draftText,draftAnalyzed:this.state.draftAnalyzed,updateRevision:this.updateRevision,editorVisible:this.state.showRevision,revisionText:this.state.revisionText,analyzeRevision:this.analyzeRevision}):this.state.showThankYouPage),React.createElement("div",null,React.createElement(p.a,{showEditor:this.state.showEditor,showInstruction:this.state.showInstruction,showRevisionPrompt:this.state.showRevisionPrompt,showRevision:this.state.showRevision,renderInstruction:this.renderInstruction,renderEditor:this.renderEditor,renderRevisionPrompt:this.renderRevisionPrompt,renderRevision:this.renderRevision}),e)}},{key:"renderInstruction",value:function(){0==this.state.seenEditor&&this.setState({showEditor:!1,showInstruction:!0,showRevisionPrompt:!1,showRevision:!1})}},{key:"renderEditor",value:function(){0==this.state.seenEditor&&this.state.seenInstruction&&this.setState({showEditor:!0,showInstruction:!1,showRevisionPrompt:!1,showRevision:!1})}},{key:"renderRevisionPrompt",value:function(){this.state.seenInstruction&&this.state.seenEditor&&this.setState({showEditor:!1,showInstruction:!1,showRevisionPrompt:!0,showRevision:!1})}},{key:"renderRevision",value:function(){this.state.seenInstruction&&this.state.seenEditor&&this.state.seenRevisionPrompt&&this.setState({showEditor:!1,showInstruction:!1,showRevisionPrompt:!1,showRevision:!0})}},{key:"userClickedInstruction",value:function(){var e=this;0==this.state.seenInstruction&&this.setState({seenInstruction:!0,durationDraft:new Date},function(){e.renderEditor()})}},{key:"userClickedRevisionPrompt",value:function(){var e=this;this.setState({seenRevisionPrompt:!0,durationRevision:new Date},function(){e.renderRevision()})}},{key:"analyzeText",value:function(){var e=this,t=this;this.setState({showEditor:!1,showInstruction:!1,showRevisionPrompt:!0,showRevision:!1,draftAnalyzed:null,durationDraft:(new Date-this.state.durationDraft)/1e3,draftPlainText:Object(a.a)(this.state.draftText)},function(){fetch(e.urls.textanalyzer+e.experiment_id,{method:"POST",credentials:"same-origin",body:JSON.stringify({text:t.state.draftPlainText}),headers:new Headers({"Content-Type":"application/json"})}).then(function(e){return e.json()}).catch(function(e){console.log(e)}).then(function(e){"control group"==t.state.user.next_measure||"Cmap"==t.state.user.next_measure?t.setState({revisionText:t.state.draftText}):t.setState({revisionText:e.html_string}),t.setState({draftAnalyzed:e,seenEditor:!0})})})}},{key:"analyzeRevision",value:function(){var e=this,t=this;this.setState({showEditor:!1,showInstruction:!1,showRevisionPrompt:!1,showRevision:!1,durationRevision:(new Date-this.state.durationRevision)/1e3,revisionPlainText:Object(a.a)(this.state.revisionText)},function(){fetch(e.urls.textanalyzer+e.experiment_id,{method:"POST",credentials:"same-origin",body:JSON.stringify({text:t.state.revisionPlainText}),headers:new Headers({"Content-Type":"application/json"})}).then(function(e){return e.json()}).catch(function(e){console.log(e)}).then(function(e){t.setState({revisionAnalyzed:e,showEditor:!1,showInstruction:!1,showRevisionPrompt:!1,showRevision:!1,showThankYouPage:!0},function(){t.sendDataToServer()})})})}},{key:"updateDraft",value:function(e){this.setState({draftText:e}),"undefined"!=typeof Storage&&localStorage.setItem("textdraft",e)}},{key:"updateRevision",value:function(e){this.setState({revisionText:e}),"undefined"!=typeof Storage&&localStorage.setItem("textrevision",e)}},{key:"sendDataToServer",value:function(){var e={pre_text:this.state.draftPlainText,pre_page_duration:this.state.durationDraft,pre_num_sentences:this.state.draftAnalyzed.numSentences,pre_num_clusters:this.state.draftAnalyzed.numCluster,pre_num_coherent_sentences:this.state.draftAnalyzed.cohSentences,pre_num_non_coherent_sentences:this.state.draftAnalyzed.cohNotSentences,pre_num_concepts:this.state.draftAnalyzed.numConcepts,pre_local_cohesion:this.state.draftAnalyzed["local cohesion"],post_text:this.state.revisionPlainText,post_page_duration:this.state.durationRevision,post_num_sentences:this.state.revisionAnalyzed.numSentences,post_num_clusters:this.state.revisionAnalyzed.numCluster,post_num_coherent_sentences:this.state.revisionAnalyzed.cohSentences,post_num_non_coherent_sentences:this.state.revisionAnalyzed.cohNotSentences,post_num_concepts:this.state.revisionAnalyzed.numConcepts,post_local_cohesion:this.state.revisionAnalyzed["local cohesion"]};fetch(this.urls.textdata+this.experiment_id,{method:"POST",credentials:"same-origin",body:JSON.stringify(e),headers:new Headers({"Content-Type":"application/json"})}).then(function(e){return e.json()}).catch(function(e){console.log(e)}).then(function(e){location.reload()})}}]),t}(React.Component);ReactDOM.render(React.createElement(y,null),document.getElementById("treatment"))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"render",value:function(){var e=React.createElement("a",{id:"instruction-read",className:"waves-effect waves-light btn",onClick:this.props.renderNextState},"Ich habe die Instruktion gelesen");return this.props.seenInstruction&&null==this.props.draftAnalyzed&&(e=React.createElement(s.a,null)),React.createElement("div",{className:"row",id:"instruction"},React.createElement("div",{className:"s12 m10 offset-m1 l6 offset-l3 col",id:"instruction-text"},React.createElement("p",null,this.props.instructionText)),React.createElement("div",{className:"s12 m8 offset-m2 l6 offset-l3 col"},e))}}]),t}(React.Component);t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={displayButton:!0},n.analyzeText=n.analyzeText.bind(n),n.returnInnerHTML=n.returnInnerHTML.bind(n),n.updateDraft=n.updateDraft.bind(n),n}return o(t,e),a(t,[{key:"render",value:function(){var e=this,t=React.createElement("a",{className:"waves-effect waves-light btn",id:"editor-button",onClick:this.analyzeText},"Analyziere meinen Text");return React.createElement("div",{className:"row",id:"editor"},React.createElement("div",{id:"editor-medium-editor",className:"col s11 m8 offset-m2 l6 offset-l3"},React.createElement("div",{id:"editor-textinput",ref:function(t){e.textInput=t},dangerouslySetInnerHTML:this.returnInnerHTML(),onKeyUp:this.updateDraft}),React.createElement("div",{id:"editor-button-div",className:"s12 m8 offset-m2 l6 offset-l3 col"},this.state.displayButton?t:React.createElement(s.a,null))))}},{key:"updateDraft",value:function(){this.props.updateDraft(this.textInput.innerHTML)}},{key:"shouldComponentUpdate",value:function(){return!this.props.editorVisible}},{key:"componentDidMount",value:function(){new MediumEditor(this.textInput,{toolbar:!1,placeholder:{text:"Bitte fÃ¼ge deinen Text hier ein ...",hideOnClick:!0}})}},{key:"returnInnerHTML",value:function(){return{__html:this.props.draftText}}},{key:"analyzeText",value:function(){this.props.analyzeText()}}]),t}(React.Component);t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),a=n(7),u=n(8),c=n(9),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return console.log(n.props.measurement),n}return o(t,e),l(t,[{key:"render",value:function(){var e=React.createElement(s.a,null);switch(this.props.measurement){case"Integriert":e=React.createElement(a.a,{draftText:this.props.draftText,draftAnalyzed:this.props.draftAnalyzed,updateRevision:this.props.updateRevision,editorVisible:this.props.editorVisible,revisionText:this.props.revisionText,analyzeRevision:this.props.analyzeRevision});break;case"control group":e=React.createElement(u.a,{draftText:this.props.draftText,updateRevision:this.props.updateRevision,revisionText:this.props.revisionText,editorVisible:this.props.editorVisible,analyzeRevision:this.props.analyzeRevision});break;case"Cmap":case"Cmap Integrated":e=React.createElement(c.a,{draftText:this.props.draftText,updateRevision:this.props.updateRevision,draftAnalyzed:this.props.draftAnalyzed,revisionText:this.props.revisionText,editorVisible:this.props.editorVisible,analyzeRevision:this.props.analyzeRevision});break;default:React.createElement(s.a,null)}return React.createElement("div",null,e)}}]),t}(React.Component);t.a=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=(n(0),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),a=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateRevision=n.updateRevision.bind(n),n.returnInnerHTML=n.returnInnerHTML.bind(n),n}return o(t,e),s(t,[{key:"render",value:function(){var e=this;return React.createElement("div",{className:"row",id:"editor"},React.createElement("div",{id:"editor-medium-editor",className:"col s11 m8 offset-m2 l6 offset-l3"},React.createElement("div",{id:"editor-textinput",ref:function(t){e.textInput=t},dangerouslySetInnerHTML:this.returnInnerHTML(),onKeyUp:this.updateRevision}),React.createElement("div",{id:"editor-button-div",className:"s12 m8 offset-m2 l6 offset-l3 col"},React.createElement("a",{onClick:this.props.analyzeRevision,className:"waves-effect waves-light btn",id:"editor-button"},"Analysiere meinen Text"))))}},{key:"returnInnerHTML",value:function(){return{__html:this.props.revisionText}}},{key:"updateRevision",value:function(){this.props.updateRevision(this.textInput.innerHTML)}},{key:"componentDidMount",value:function(){new MediumEditor(this.textInput,{toolbar:!1,placeholder:{hideOnClick:!0}})}},{key:"shouldComponentUpdate",value:function(){return!this.props.editorVisible}}]),t}(React.Component);t.a=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=(n(0),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),a=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateRevision=n.updateRevision.bind(n),n.returnInnerHTML=n.returnInnerHTML.bind(n),n}return o(t,e),s(t,[{key:"render",value:function(){var e=this;return React.createElement("div",{className:"row",id:"editor"},React.createElement("div",{id:"editor-medium-editor",className:"col s11 m8 offset-m2 l6 offset-l3"},React.createElement("div",{id:"editor-textinput",ref:function(t){e.textInput=t},dangerouslySetInnerHTML:this.returnInnerHTML(),onKeyUp:this.updateRevision}),React.createElement("div",{id:"editor-button-div",className:"s12 m8 offset-m2 l6 offset-l3 col"},React.createElement("a",{onClick:this.props.analyzeRevision,className:"waves-effect waves-light btn",id:"editor-button"},"Analysiere meinen Text"))))}},{key:"returnInnerHTML",value:function(){return{__html:this.props.revisionText}}},{key:"updateRevision",value:function(){this.props.updateRevision(this.textInput.innerHTML)}},{key:"componentDidMount",value:function(){new MediumEditor(this.textInput,{toolbar:!1,placeholder:{hideOnClick:!0}})}},{key:"shouldComponentUpdate",value:function(){return!this.props.editorVisible}}]),t}(React.Component);t.a=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=(n(0),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),a=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return console.log(n.props),n.updateRevision=n.updateRevision.bind(n),n.returnInnerHTML=n.returnInnerHTML.bind(n),n}return o(t,e),s(t,[{key:"render",value:function(){var e=this;return React.createElement("div",{className:"row",id:"editor"},React.createElement("div",{id:"editor-medium-editor",className:"col s11 m4 offset-m1"},React.createElement("div",{id:"editor-textinput",ref:function(t){e.textInput=t},dangerouslySetInnerHTML:this.returnInnerHTML(),onKeyUp:this.updateRevision}),React.createElement("div",{id:"editor-button-div",className:"s12 m4 offset-m1 col"},React.createElement("a",{onClick:this.props.analyzeRevision,className:"waves-effect waves-light btn",id:"editor-button"},"Analysiere meinen Text"))),React.createElement("div",{id:"cmap",ref:function(t){e.cmap=t},className:"col s11 m7"},React.createElement("svg",{ref:function(t){e.svg=t}})))}},{key:"returnInnerHTML",value:function(){return{__html:this.props.revisionText}}},{key:"updateRevision",value:function(){this.props.updateRevision(this.textInput.innerHTML)}},{key:"componentDidMount",value:function(){var e=this,t=(new MediumEditor(this.textInput,{toolbar:!1,placeholder:{hideOnClick:!0}}),["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"]),n=this.cmap.offsetWidth-20,r=this.cmap.offsetHeight,i=d3.select(this.svg).attr("width",n).attr("height",r),o=i.append("g").attr("width",n).attr("height",r),s=(i.append("rect").attr("class","overlay").attr("width",n).attr("height",r).style("fill","red").style("opacity",0),i.append("line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0).style("stroke","red").style("stroke-width","2"),d3.scaleLinear().domain([0,1]).range([0,n]),d3.forceSimulation(this.props.draftAnalyzed.nodes).force("charge",d3.forceManyBody().strength(-250)).force("link",d3.forceLink(this.props.draftAnalyzed.links).distance(80).id(function(e){return e.id})).force("center",d3.forceCenter(n/2,r/2)).force("collision",d3.forceCollide().radius(50)).force("x",d3.forceX()).force("y",d3.forceY()).stop());d3.timeout(function(){for(var n=0,r=Math.ceil(Math.log(s.alphaMin())/Math.log(1-s.alphaDecay()));n<r;++n)s.tick();var i=(o.append("g").attr("class","links").selectAll("line").data(e.props.draftAnalyzed.links).enter().append("line").attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}).style("stroke-dasharray",function(e){if("coreference"==e.device)return"5,5"}).style("d",function(e){if("coreference"==e.device)return"M5 20 l215 0"}),o.append("g").attr("class","nodes").selectAll(".node").data(e.props.draftAnalyzed.nodes).enter().append("g").attr("id",function(e,t){return"node-"+e.id}).attr("class","node").attr("transform",function(e){return"translate("+e.x+","+e.y+")"}));i.append("circle").attr("r",10).attr("cx",0).attr("cy",0).attr("fill",function(n,r){return t[e.props.draftAnalyzed.wordClusterIndex[n.id]]}),i.append("text").attr("dy",-8).attr("dx",10).style("opacity",.8).attr("text-anchor","start").text(function(e){return e.id})})}},{key:"shouldComponentUpdate",value:function(){return!this.props.editorVisible}}]),t}(React.Component);t.a=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),s(t,[{key:"render",value:function(){return React.createElement("div",{className:"row",id:"header-experiment"},React.createElement("ul",{id:"header-experiment-ul"},React.createElement("li",{onClick:this.props.renderInstruction,className:this.props.showInstruction?"highlight-experiment-status":""}," ",React.createElement("i",{className:"material-icons"},"library_books"),"Anleitung lesen"),React.createElement("li",{onClick:this.props.renderEditor,className:this.props.showEditor?"highlight-experiment-status":""},React.createElement("i",{className:"material-icons"},"mode_edit"),"Text schreiben"),React.createElement("li",{onClick:this.props.renderRevisionPrompt,className:this.props.showRevisionPrompt?"highlight-experiment-status":""},React.createElement("i",{className:"material-icons"},"library_books"),"Anleitung zur Ãœberarbeitung"),React.createElement("li",{onClick:this.props.renderRevision,className:this.props.showRevision?"highlight-experiment-status":""},React.createElement("i",{className:"material-icons"},"refresh"),"Text Ã¼berarbeiten")))}}]),t}(React.Component);t.a=a},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return b.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function s(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function a(e){var t=new FileReader,n=s(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=s(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(b.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(b.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(b.arrayBuffer&&b.blob&&w(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!R(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e){var t=e.toUpperCase();return _.indexOf(t)>-1?t:e}function d(e,t){t=t||{};var n=t.body;if(e instanceof d){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=p(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function y(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var b={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(b.arrayBuffer)var v=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=function(e){return e&&DataView.prototype.isPrototypeOf(e)},R=ArrayBuffer.isView||function(e){return e&&v.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},b.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},f.call(d.prototype),f.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];m.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=d,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,r){var i=new d(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:y(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new m(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&b.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send(void 0===i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)}]);